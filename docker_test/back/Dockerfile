FROM node:19
#BACK

WORKDIR /tmp/back
COPY ./data .


ARG API42_CLIENT_ID=$API42_CLIENT_ID
ARG API42_CLIENT_SECRET=$API42_CLIENT_SECRET
ARG API42_AUTH_REDIRECT=$API42_AUTH_REDIRECT

ARG PORT=$PORT
ARG ACCESS_SECRET=$ACCESS_SECRET
ARG REFRESH_SECRET=$REFRESH_SECRET

ARG POSTGRES_HOST=$POSTGRES_HOST
ARG POSTGRES_PORT=$POSTGRES_PORT
ARG POSTGRES_USER=$POSTGRES_USER
ARG POSTGRES_PASSWORD=$POSTGRES_PASSWORD
ARG POSTGRES_NAME=$POSTGRES_NAME

RUN npm i

ENTRYPOINT ["npm", "start"]